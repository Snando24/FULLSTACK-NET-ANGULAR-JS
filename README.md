# Sistema de Gesti√≥n de Clientes - FULLSTACK

## üìã Descripci√≥n del Proyecto

Sistema completo de gesti√≥n de clientes desarrollado con arquitectura de microservicios, que incluye un frontend en Angular y un backend en .NET Core con base de datos Oracle. El sistema permite realizar operaciones CRUD completas sobre la entidad Cliente con funcionalidades avanzadas de b√∫squeda, validaci√≥n y dise√±o responsivo.

## üèóÔ∏è Arquitectura del Sistema

### Frontend (Angular 19)
- **Framework**: Angular 19 con TypeScript
- **UI Framework**: Bootstrap 5 + Font Awesome
- **Arquitectura**: Component-based con servicios inyectables
- **Patrones**: Observer Pattern (RxJS), Service Layer, Dependency Injection
- **Puerto**: http://localhost:4201

### Backend (.NET 9)
- **Framework**: .NET 9 con C#
- **ORM**: Entity Framework Core
- **Base de Datos**: Oracle Database
- **Arquitectura**: Microservicio RESTful API
- **Patrones**: Repository Pattern, Service Layer, DTO Pattern
- **Puerto**: http://localhost:4200

## üìä Modelo de Datos

### Entidad Cliente
```sql
CREATE TABLE CLIENTE (
    ID NUMBER PRIMARY KEY,
    RUC VARCHAR2(11) NOT NULL UNIQUE,
    RAZONSOCIAL VARCHAR2(200) NOT NULL,
    TELEFONO VARCHAR2(20),
    CORREO VARCHAR2(100),
    DIRECCION VARCHAR2(200)
);
```

**Campos Obligatorios:**
- RUC (11 d√≠gitos num√©ricos)
- Raz√≥n Social

**Campos Opcionales:**
- Tel√©fono
- Correo Electr√≥nico
- Direcci√≥n

## üöÄ Instalaci√≥n y Configuraci√≥n

### Prerrequisitos
- **.NET 9 SDK**: [Descargar](https://dotnet.microsoft.com/download/dotnet/9.0)
- **Node.js 18+**: [Descargar](https://nodejs.org/)
- **Oracle Database**: 11g o superior
- **Visual Studio 2022** o **VS Code** (recomendado)

### 1. Configuraci√≥n de la Base de Datos Oracle

#### Crear Usuario y Tabla
```sql
-- Conectar como SYS o SYSTEM
CREATE USER CLIENTE_USER IDENTIFIED BY "Cliente123!";
GRANT CONNECT, RESOURCE TO CLIENTE_USER;
GRANT CREATE SESSION TO CLIENTE_USER;
GRANT UNLIMITED TABLESPACE TO CLIENTE_USER;

-- Conectar como CLIENTE_USER
CREATE TABLE CLIENTE (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RUC VARCHAR2(11) NOT NULL UNIQUE,
    RAZONSOCIAL VARCHAR2(200) NOT NULL,
    TELEFONO VARCHAR2(20),
    CORREO VARCHAR2(100),
    DIRECCION VARCHAR2(200)
);

-- Insertar datos de prueba
INSERT INTO CLIENTE (RUC, RAZONSOCIAL, TELEFONO, CORREO, DIRECCION) 
VALUES ('12345678901', 'Empresa Demo S.A.C.', '987654321', 'demo@empresa.com', 'Av. Principal 123');

COMMIT;
```

#### Configurar TNS (Opcional)
```tnsnames.ora
CLIENTE_DB = 
  (DESCRIPTION = 
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA = 
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  )
```

### 2. Configuraci√≥n del Backend (.NET)

#### Navegar al directorio del backend
```bash
cd microservice/ClienteService/ClienteService.Api
```

#### Instalar paquetes NuGet
```bash
dotnet add package Oracle.EntityFrameworkCore
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Microsoft.EntityFrameworkCore.Tools
dotnet add package Swashbuckle.AspNetCore
```

#### Configurar Connection String
Editar `appsettings.json`:
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=localhost:1521/XE;User Id=CLIENTE_USER;Password=Cliente123!;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

#### Ejecutar migraciones (si es necesario)
```bash
dotnet ef migrations add InitialCreate
dotnet ef database update
```

#### Ejecutar el backend
```bash
dotnet run
```

El backend estar√° disponible en: http://localhost:4200

### 3. Configuraci√≥n del Frontend (Angular)

#### Navegar al directorio del frontend
```bash
cd frontend/cliente-app
```

#### Instalar dependencias
```bash
npm install
```

#### Configurar URL del API
Verificar en `src/app/constants/app.constants.ts`:
```typescript
export const APP_CONFIG = {
  API_URL: 'http://localhost:4200/api/cliente',
  // ...
};
```

#### Ejecutar el frontend
```bash
npm start
```

El frontend estar√° disponible en: http://localhost:4201

## üîß Funcionalidades Implementadas

### Operaciones CRUD
- ‚úÖ **Crear Cliente**: Formulario con validaci√≥n en tiempo real
- ‚úÖ **Listar Clientes**: Tabla responsiva con paginaci√≥n
- ‚úÖ **Editar Cliente**: Modal pre-poblado con datos existentes
- ‚úÖ **Eliminar Cliente**: Confirmaci√≥n antes de eliminar
- ‚úÖ **Ver Detalles**: Modal de detalles con opciones de editar/eliminar

### B√∫squeda y Filtrado
- ‚úÖ **B√∫squeda en Tiempo Real**: Por RUC o Raz√≥n Social
- ‚úÖ **Debounce**: Optimizaci√≥n de rendimiento (300ms)
- ‚úÖ **Resaltado**: T√©rminos de b√∫squeda resaltados
- ‚úÖ **Limpieza**: Filtros se limpian al actualizar

### Validaciones
- ‚úÖ **RUC**: 11 d√≠gitos num√©ricos obligatorios
- ‚úÖ **Raz√≥n Social**: Campo obligatorio
- ‚úÖ **Email**: Formato v√°lido (opcional)
- ‚úÖ **Tel√©fono**: Formato v√°lido (opcional)
- ‚úÖ **Visual**: Campos obligatorios resaltados en rojo

### Dise√±o y UX
- ‚úÖ **Responsive**: Adaptable a m√≥viles, tablets y desktop
- ‚úÖ **Institucional**: Dise√±o profesional corporativo
- ‚úÖ **Mensajes**: Notificaciones de √©xito/error temporales
- ‚úÖ **Loading States**: Indicadores de carga
- ‚úÖ **Iconos**: Font Awesome para mejor UX

## üìÅ Estructura del Proyecto

```
FULLSTACK/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ cliente-app/
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # Componentes Angular
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants/           # Constantes de la app
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/              # Interfaces TypeScript
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Servicios Angular
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md            # Documentaci√≥n frontend
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ styles.scss              # Estilos globales
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ package.json
‚îÇ       ‚îî‚îÄ‚îÄ angular.json
‚îú‚îÄ‚îÄ microservice/
‚îÇ   ‚îî‚îÄ‚îÄ ClienteService/
‚îÇ       ‚îî‚îÄ‚îÄ ClienteService.Api/
‚îÇ           ‚îú‚îÄ‚îÄ Controllers/              # Controladores API
‚îÇ           ‚îú‚îÄ‚îÄ Models/                   # Modelos de datos
‚îÇ           ‚îú‚îÄ‚îÄ Services/                 # Servicios de negocio
‚îÇ           ‚îú‚îÄ‚îÄ Repositories/             # Repositorios de datos
‚îÇ           ‚îú‚îÄ‚îÄ DTOs/                     # Data Transfer Objects
‚îÇ           ‚îî‚îÄ‚îÄ Scripts/                  # Scripts SQL
‚îî‚îÄ‚îÄ README.md                            # Este archivo
```

## üìÇ Carpetas para Ejecutar el Proyecto

### üéØ Rutas Exactas de Ejecuci√≥n

Para ejecutar correctamente el proyecto, debes navegar a estas carpetas espec√≠ficas:

#### **Backend (.NET)**
```bash
# Desde la ra√≠z del proyecto FULLSTACK
cd microservice/ClienteService/ClienteService.Api

# Verificar que est√°s en la carpeta correcta
# Debe contener: ClienteService.Api.csproj, Program.cs, Controllers/, etc.
ls

# Ejecutar comandos del backend
dotnet restore
dotnet run
```

#### **Frontend (Angular)**
```bash
# Desde la ra√≠z del proyecto FULLSTACK
cd frontend/cliente-app

# Verificar que est√°s en la carpeta correcta
# Debe contener: package.json, angular.json, src/, etc.
ls

# Ejecutar comandos del frontend
npm install
npm start
```

### ‚ö†Ô∏è Importante
- **Siempre ejecuta desde la ra√≠z del proyecto FULLSTACK**
- **Backend**: `microservice/ClienteService/ClienteService.Api/`
- **Frontend**: `frontend/cliente-app/`
- **No ejecutes desde carpetas intermedias**

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### Frontend
- **Angular 19**: Framework principal
- **TypeScript**: Lenguaje de programaci√≥n
- **Bootstrap 5**: Framework CSS
- **Font Awesome**: Iconograf√≠a
- **RxJS**: Programaci√≥n reactiva
- **HTML5/CSS3**: Estructura y estilos

### Backend
- **.NET 9**: Framework principal
- **C#**: Lenguaje de programaci√≥n
- **Entity Framework Core**: ORM
- **Oracle Database**: Base de datos
- **Swagger/OpenAPI**: Documentaci√≥n API
- **AutoMapper**: Mapeo de objetos

## üîç API Endpoints

### Cliente Controller
```
GET    /api/cliente              # Obtener todos los clientes
GET    /api/cliente/{ruc}        # Obtener cliente por RUC
GET    /api/cliente/search?razonSocial={term}  # Buscar clientes
POST   /api/cliente              # Crear nuevo cliente
PUT    /api/cliente/{ruc}        # Actualizar cliente
DELETE /api/cliente/{ruc}        # Eliminar cliente
```

### Ejemplo de Request/Response
```json
// POST /api/cliente
{
  "ruc": "12345678901",
  "razonSocial": "Empresa Demo S.A.C.",
  "telefono": "987654321",
  "correo": "demo@empresa.com",
  "direccion": "Av. Principal 123"
}

// Response 201 Created
{
  "id": 1,
  "ruc": "12345678901",
  "razonSocial": "Empresa Demo S.A.C.",
  "telefono": "987654321",
  "correo": "demo@empresa.com",
  "direccion": "Av. Principal 123"
}
```

## üêõ Soluci√≥n de Problemas

### Error: ORA-50032: Column contains NULL data
**Causa**: Oracle devuelve NULL para campos opcionales que no est√°n configurados correctamente.

**Soluci√≥n**:
1. Verificar que los campos opcionales est√©n marcados como `string?` en el modelo C#
2. Usar `NVL` en las consultas SQL para convertir NULL a cadena vac√≠a
3. Ejecutar el script de actualizaci√≥n de datos NULL

### Error: ERR_CONNECTION_REFUSED
**Causa**: El frontend no puede conectar con el backend.

**Soluci√≥n**:
1. Verificar que el backend est√© ejecut√°ndose en el puerto 4200
2. Verificar la URL del API en `app.constants.ts`
3. Verificar que no haya problemas de CORS

### Error: Could not find '@angular-devkit/build-angular'
**Causa**: Dependencias de Angular no instaladas correctamente.

**Soluci√≥n**:
```bash
cd frontend/cliente-app
rm -rf node_modules package-lock.json
npm install
```

## üöÄ Comandos R√°pidos de Ejecuci√≥n

### ‚ö° Ejecutar Todo el Proyecto

#### **Terminal 1 - Backend:**
```bash
# Desde la ra√≠z del proyecto FULLSTACK
cd microservice/ClienteService/ClienteService.Api
dotnet restore
dotnet run
```

#### **Terminal 2 - Frontend:**
```bash
# Desde la ra√≠z del proyecto FULLSTACK
cd frontend/cliente-app
npm install
npm start
```

### üéØ URLs de Acceso
- **Frontend**: http://localhost:4201
- **Backend API**: http://localhost:4200/api/cliente
- **Swagger**: http://localhost:4200/swagger

### üìã Verificaci√≥n R√°pida
1. **Backend**: Debe mostrar "Now listening on: http://localhost:4200"
2. **Frontend**: Debe abrir autom√°ticamente en http://localhost:4201
3. **API**: Visitar http://localhost:4200/swagger para probar endpoints

## üìà Pr√≥ximas Mejoras

- [ ] **Autenticaci√≥n**: Sistema de login y roles
- [ ] **Paginaci√≥n**: Paginaci√≥n del lado del servidor
- [ ] **Exportaci√≥n**: Exportar datos a Excel/PDF
- [ ] **Auditor√≠a**: Log de cambios en los datos
- [ ] **Tests**: Pruebas unitarias y de integraci√≥n
- [ ] **Docker**: Containerizaci√≥n de la aplicaci√≥n
- [ ] **Logging**: Sistema de logs centralizado

## üë• Contribuci√≥n

1. Fork el proyecto
2. Crear una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abrir un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo `LICENSE` para m√°s detalles.

## üìû Soporte

Para soporte t√©cnico o preguntas sobre el proyecto, contactar a:
- **Email**: soporte@empresa.com
- **Documentaci√≥n**: Ver README espec√≠ficos en cada m√≥dulo

---

**Desarrollado con ‚ù§Ô∏è usando .NET 9 y Angular 19**